(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{285:function(s,e,t){"use strict";t.r(e);var a=t(13),n=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"linux-使用-systemd-user-配置开机启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-使用-systemd-user-配置开机启动"}},[s._v("#")]),s._v(" Linux 使用 systemd user 配置开机启动")]),s._v(" "),e("ol",[e("li",[s._v("在 systemd 用户目录 "),e("code",[s._v("/home/xxx/.config/systemd/user/")]),s._v(" 中创建 "),e("code",[s._v("jboxwebdav.service")]),s._v(" 文件：")])]),s._v(" "),e("div",{staticClass:"language-jboxwebdav.service line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[Unit]\nDescription = WebDAV Sercive for jBox\nAfter=network-online.target\nWants=network-online.target systemd-networkd-wait-online.service\n\n[Service]\nType = simple\nExecStart = sh /home/xxx/.config/systemd/user/jbox-startup.sh\n\n[Install]\nWantedBy = default.target\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("在 systemd 用户目录："),e("code",[s._v("/home/xxx/.config/systemd/user/")]),s._v(" 中创建启动脚本 "),e("code",[s._v("jbox-startup.sh")]),s._v("：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /path_to_your_location/JboxWebdav.ConsoleApp-Linux-x64 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("  ./JboxWebdav.ConsoleApp  -no-interactive  -c config.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("其中"),e("br"),s._v(" "),e("code",[s._v("-no-interactive")]),s._v(" 必选，非交互模式，否则会导致报错无法启动\n"),e("code",[s._v("-c config.yml")]),s._v(" 可选，自定义配置，详见 "),e("RouterLink",{attrs:{to:"/tip/Config.html"}},[s._v("使用 YAML 配置文件初始化设置")])],1),s._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[s._v("启动服务/设置开机启动")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载守护进程，读取 jbox-startup.service 文件")]),s._v("\nsystemctl --user daemon-reload\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务状态")]),s._v("\nsystemctl --user start jboxwebdav\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务状态，可以此命令查看报错日志")]),s._v("\nsystemctl --user status jboxwebdav\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动 jboxwebdav 服务")]),s._v("\nsystemctl --user "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" jboxwebdav\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);